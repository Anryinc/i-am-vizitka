<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
  <!-- ... весь твой <style> остаётся без изменений ... -->

  <style>
    /* Добавь только эти строки к уже существующему .theme-switch */
    .theme-switch {
      position: absolute;
      top: 20px;
      right: 30px;
      width: 64px;
      height: 32px;
      background: #444;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: inset 0 4px 8px rgba(0,0,0,0.3);
    }
    .theme-switch::before {
      content: "";
      position: absolute;
      top: 4px;
      left: 4px;
      width: 24px;
      height: 24px;
      background: white;
      border-radius: 50%;
      transition: 0.4s;
      z-index: 1;
    }
    .theme-switch::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 10px;
      transform: translateY(-50%);
      font-size: 14px;
      color: rgba(255,255,255,0.7);
    }
    [data-theme="dark"] .theme-switch::after { content: ""; left: 34px; }
    input:checked ~ .theme-switch::before { transform: translateX(32px); }
    input:checked ~ .theme-switch { background: var(--accent); }
  </style>
</head>
<body>

  <div class="card">

    <!-- ПРАВИЛЬНЫЙ порядок: input → label → всё остальное -->
    <input type="checkbox" id="theme-toggle" class="theme-input">
    <label for="theme-toggle" class="theme-switch"></label>

    <!-- весь остальной контент без изменений -->
    <div class="photo"></div>
    <h1>Привет, я Андрей</h1>
    <!-- ... и так далее ... -->

  </div>

  <!-- Добавь этот скрипт прямо перед </body> -->
  <script>
    const toggle = document.getElementById('theme-toggle');
    const html = document.documentElement;

    // При загрузке страницы
    if (localStorage.getItem('theme') === 'dark' || 
        (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      html.setAttribute('data-theme', 'dark');
      toggle.checked = true;
    }

    // При переключении
    toggle.addEventListener('change', () => {
      if (toggle.checked) {
        html.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
      } else {
        html.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
      }
    });
  </script>

</body>
</html>
